!function(){"use strict";var e,t={558:function(e,t,n){var a=window.wp.element,l=window.wp.blocks,r=(window.wp.i18n,window.wp.blockEditor),o=window.wp.serverSideRender,s=n.n(o);const{Component:i}=wp.element;class m extends i{constructor(e){super(e)}componentDidMount(){}render(){const{content:e,content_text:t,post_id:n}=this.props.attributes;let l=["post_id","design","title","size","alabel","rlabel","ylabel","klabel","mlabel","tag","attention_text","attention_design","attention_color"];if(t){let e={};for(var r=0;r<l.length;r++){let n=l[r],a=new RegExp(n+'="S+"'),o=this.props.attributes[n];if(""===o||"0"===o){let l=t.match(a);l&&l[1]&&(e[n]=l[1],this.props.setAttributes(e))}}return(0,a.createElement)(s(),{block:"rinkerg/gutenberg-rinker",attributes:this.props.attributes})}return""}}var c=window.wp.components;const{Component:p,Fragment:u}=wp.element,{SVG:d,Path:h}=wp.components,b=(0,a.createElement)(d,{viewBox:"0 0 24 24",width:"24",height:"24"},(0,a.createElement)(h,{className:"cls-1",d:"M5.52,9C5.52,5.87,4,7.16,4,5.91S5.56,4.66,6.36,4.66c.43,0,.83,0,1.25.06s.83.08,1.23.08c.65,0,1.29,0,2-.08s1.31-.06,2-.06c2.28,0,4.92,1,4.92,3.69A3.16,3.16,0,0,1,16,11.27c-.18.1-.32.16-.32.41s.26.38.5.48c1.42.53,2,1.46,2.32,3.63.25,1.88,1.56.75,1.56,2,0,.77-.93,1.57-3.21,1.57-3.23,0-3.63-1.85-4.26-4.51C12.33,13.9,12,13,10.88,13c-.45,0-.61.06-.61,1.33a12.74,12.74,0,0,0,.15,2c.16.93,1.19.64,1.19,1.61,0,.73-.51,1.27-3.78,1.27-1,0-3.83,0-3.83-1.47,0-1.05,1.51-.32,1.51-3Zm4.68.89c0,.53-.15,1,.52,1,1.31,0,1.74-.73,1.74-2,0-1-.25-2-1.42-2-.74,0-.72.46-.76,1.08Z"})),{Component:g,Fragment:v}=wp.element,{apiFetch:E}=wp;class _ extends g{constructor(e){super(e),this.onTemplateNames=this.props.onTemplateNames.bind(this)}componentDidMount(){}render(){let e=gutenberg_rinker.templates;const{setAttributes:t,templateNames:n,templateAtts:l,templateId:r}=this.props;return(0,a.createElement)("li",{className:"yyi-rinker-template-name-li"},(0,a.createElement)("div",{className:"yyi-rinker-template-name-container"},(0,a.createElement)("span",{className:"dashicons dashicons-download"}),(0,a.createElement)("span",{className:"yyi-rinker-template-name","data-templateid":r,onClick:n=>{let a=n.target.dataset.templateid;if(a in e){let n=e[a];for(let e in l)if(e in n){var r={};r[e]=n[e],t(r)}}}},n[r]),(0,a.createElement)("span",{className:"dashicons dashicons-trash yyi-rinker-template-delete","data-templateid":r,onClick:t=>{let n=t.target.dataset.templateid;if(n in e){let e={};e.id=n,E({path:"/yyirest/v1/template/delete",method:"POST",data:e}).then((e=>{this.onTemplateNames(e)})).catch((e=>{console.error("通信に失敗しました",e)}))}}})))}}const{Component:C,Fragment:f}=wp.element,{apiFetch:k}=wp;class T extends C{constructor(e){super(e)}componentDidMount(){}render(){const{attributes:e,setAttributes:t,templateName:n,templateNames:l,templateAtts:r,onTemplateNames:o}=this.props;let s=[];for(let n in l)s.push((0,a.createElement)(_,{attributes:e,setAttributes:t,onTemplateNames:o,templateNames:l,templateAtts:r,templateId:n}));return(0,a.createElement)(f,null,s)}}const{Component:w,Fragment:y,useState:N}=wp.element,{apiFetch:x}=wp;class S extends w{constructor(e){super(e),this.state={selected:null,isLoadTemplateLoading:!1},this.onTemplateNames=this.onTemplateNames.bind(this),this.onClickSaveTemplate=this.onClickSaveTemplate.bind(this),this.onClickSaveLoadTemplate=this.onClickSaveLoadTemplate.bind(this)}componentDidMount(){}onTemplateNames(e){window.gutenberg_rinker.templates=e;let t={};for(let n in e)t[n]=e[n].template_name;this.props.setAttributes({templete_names:t})}onClickSaveTemplate(e){const{templateName:t}=this.props,{attributes:n}=this.props;let a=gutenberg_rinker.template_attrs,l={};for(let e in a)l[e]=n[e];l.template_name=t,x({path:"/yyirest/v1/template/create",method:"POST",data:l}).then((e=>{this.onTemplateNames(e)})).catch((e=>{console.error("通信に失敗しました",e)}))}onClickSaveLoadTemplate(e){let t=this.props.loadTemplateId,n=window.gutenberg_rinker.templates;if(this.setState({isLoadTemplateLoading:!0}),t in n){let e={};e.id=t,x({path:"/yyirest/v1/template/load/create",method:"POST",data:e}).then((e=>{this.setState({isLoadTemplateLoading:!1})})).catch((e=>{console.error("通信に失敗しました",e)}))}}render(){let e=gutenberg_rinker.template_attrs,t=gutenberg_rinker.template_max_count;const{attributes:n,setAttributes:l,templateName:r,templateNames:o,setTemplateName:s,loadTemplateId:i,setLoadTemplateId:m}=this.props;let p="";p="unlimited"===t?(0,a.createElement)("div",null,(0,a.createElement)("span",null,"無制限に作成できます。")):(0,a.createElement)("div",null,(0,a.createElement)("span",null,"最大",t,"個まで作成できます。"),(0,a.createElement)("br",null),(0,a.createElement)("span",null,"制限を解除したい方は"),(0,a.createElement)("a",{target:"_blank",rel:"nofollow noopener noreferrer",href:"https://oyayoi.fanbox.cc/tags/%E6%9C%80%E6%96%B0%E9%99%90%E5%AE%9A%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3"},"こちらのプラグイン"),(0,a.createElement)("span",null,"を導入ください"));let u,d=[];d.push({label:"設定なし",value:null});for(let e in o)d.push({label:o[e],value:e});return u=this.state.isLoadTemplateLoading?(0,a.createElement)("span",{class:"is-loading"},"保存中..."):(0,a.createElement)("span",{class:"is-loading"}),(0,a.createElement)(y,null,(0,a.createElement)("div",null,(0,a.createElement)(c.PanelBody,{title:"テンプレート設定",icon:b},(0,a.createElement)("div",{className:"yyi-rinker-new-template-name"},(0,a.createElement)(c.TextControl,{label:"新規テンプレート名",value:r,onChange:s}),(0,a.createElement)(c.Button,{text:"保存する",variant:"primary",onClick:this.onClickSaveTemplate})),p,(0,a.createElement)("ul",{className:"yyi-rinker-template-names"},(0,a.createElement)(T,{attributes:n,setAttributes:l,onTemplateNames:this.onTemplateNames,templateNames:o,templateAtts:e})),(0,a.createElement)("div",{className:"yyi-rinker-load-template-name"},(0,a.createElement)(c.SelectControl,{label:"デフォルトテンプレート",value:i,options:d,onChange:m}),(0,a.createElement)(c.Button,{text:"デフォルトとして保存する",variant:"primary",onClick:e=>this.onClickSaveLoadTemplate(e)}),u))))}}const{Component:A,Fragment:L}=wp.element;class O extends A{constructor(e){super(e)}componentDidMount(){}render(){let e=gutenberg_rinker.admin_url;const{post_id:t}=this.props.attributes;return(0,a.createElement)(c.PanelBody,{title:"商品リンク管理",icon:b},(0,a.createElement)(c.ExternalLink,{href:e+"?post="+t+"&action=edit"},"商品リンク管理で編集"))}}const{apiFetch:I}=wp,{Component:B,Fragment:F}=wp.element;class P extends B{constructor(e){super(e)}componentDidMount(){let e=gutenberg_rinker.template_attrs;const{setAttributes:t,content_text:n}=this.props;let a;a=!1;for(let t in e)if(void 0===this.props.attributes[t]||""!==this.props.attributes[t]){a=!0;break}if((void 0===n||0===n.length)&&a){let e=gutenberg_rinker.templates;I({path:"/yyirest/v1/template/load/get",method:"get"}).then((n=>{if(void 0===e[n])return!1;let a=e[n];for(let e in a)t({[e]:a[e]})})).catch((e=>{console.error("通信に失敗しました",e)}))}}render(){const{setAttributes:e,attributes:t,templateName:n,template_names:l,setTemplateName:o,loadTemplateId:s,setLoadTemplateId:i,colors:m,color:p}=this.props;let{design:u,title:d,size:h,alabel:g,rlabel:v,ylabel:E,klabel:_,mlabel:C,tag:f,attention_text:k,attention_design:T}=t;""===T&&(T="ribbon");let w=gutenberg_rinker.designs;return(0,a.createElement)(F,null,(0,a.createElement)(r.InspectorControls,null,(0,a.createElement)(S,{templateName:n,setTemplateName:o,setAttributes:e,attributes:t,templateNames:l,loadTemplateId:s,setLoadTemplateId:i}),(0,a.createElement)(c.PanelBody,{title:"Rinker設定",icon:b},(0,a.createElement)(c.SelectControl,{label:"デザイン",help:"デザインを選びます",value:u,options:w,onChange:t=>e({design:t})}),(0,a.createElement)(c.TextControl,{label:"注目ラベル",help:"ボックスに注意を引くラベルをつけます",value:k,onChange:t=>e({attention_text:t})}),(0,a.createElement)(c.__experimentalToggleGroupControl,{label:"注目ラベルデザイン",value:T,onChange:t=>e({attention_design:t})},(0,a.createElement)(c.__experimentalToggleGroupControlOption,{label:"リボン",value:"ribbon"}),(0,a.createElement)(c.__experimentalToggleGroupControlOption,{label:"右リボン",value:"right_ribbon"}),(0,a.createElement)(c.__experimentalToggleGroupControlOption,{label:"丸",value:"circle"})),(0,a.createElement)(c.ColorPalette,{label:"注目ラベル色",colors:m,value:p,onChange:t=>e({attention_color:t})}),(0,a.createElement)(c.TextControl,{label:"タイトル",help:"タイトルを上書きします",value:d,onChange:t=>e({title:t})}),(0,a.createElement)(c.SelectControl,{label:"画像サイズ",help:"画像サイズを上書きします",value:h,options:[{label:"デフォルト",value:"0"},{label:"S",value:"s"},{label:"M",value:"m"},{label:"L",value:"l"}],onChange:t=>e({size:t})}),(0,a.createElement)(c.TextControl,{label:"Amazonボタンの文言",help:"",value:g,onChange:t=>e({alabel:t})}),(0,a.createElement)(c.TextControl,{label:"楽天市場ボタンの文言",help:"",value:v,onChange:t=>e({rlabel:t})}),(0,a.createElement)(c.TextControl,{label:"Yahooショッピングボタンの文言",help:"",value:E,onChange:t=>e({ylabel:t})}),(0,a.createElement)(c.TextControl,{label:"Kindleボタンの文言",help:"",value:_,onChange:t=>e({klabel:t})}),(0,a.createElement)(c.TextControl,{label:"メルカリボタンの文言",help:"",value:C,onChange:t=>e({mlabel:t})}),(0,a.createElement)(c.TextControl,{label:"AmazonのトラッキングID（個別設定）",help:"",value:f,onChange:t=>e({tag:t})})),(0,a.createElement)(O,{attributes:t})))}}const{Fragment:M,Component:z}=wp.element,{select:D}=wp.data;var G=JSON.parse('{"u2":"rinkerg/gutenberg-rinker"}');const{SVG:j,Path:R}=wp.components;(0,l.registerBlockType)(G.u2,{icon:{src:(0,a.createElement)(j,{viewBox:"0 0 24 24",width:"24",height:"24"},(0,a.createElement)(R,{className:"cls-1",d:"M5.52,9C5.52,5.87,4,7.16,4,5.91S5.56,4.66,6.36,4.66c.43,0,.83,0,1.25.06s.83.08,1.23.08c.65,0,1.29,0,2-.08s1.31-.06,2-.06c2.28,0,4.92,1,4.92,3.69A3.16,3.16,0,0,1,16,11.27c-.18.1-.32.16-.32.41s.26.38.5.48c1.42.53,2,1.46,2.32,3.63.25,1.88,1.56.75,1.56,2,0,.77-.93,1.57-3.21,1.57-3.23,0-3.63-1.85-4.26-4.51C12.33,13.9,12,13,10.88,13c-.45,0-.61.06-.61,1.33a12.74,12.74,0,0,0,.15,2c.16.93,1.19.64,1.19,1.61,0,.73-.51,1.27-3.78,1.27-1,0-3.83,0-3.83-1.47,0-1.05,1.51-.32,1.51-3Zm4.68.89c0,.53-.15,1,.52,1,1.31,0,1.74-.73,1.74-2,0-1-.25-2-1.42-2-.74,0-.72.46-.76,1.08Z"}))},edit:function(e){let{clientId:t,attributes:n,setAttributes:l,className:o,name:s}=e,{content:i,content_text:c,alignment:p,design:u,title:d,size:h,alabel:b,rlabel:g,ylabel:v,klabel:E,mlabel:_,post_id:C,tag:f,attention_text:k,attention_design:T,attention_color:w}=n;c=Array.isArray(i)?i[0]:i,l({content_text:c});const y="#fea724";""===w&&(w=y);const[N,x]=(0,a.useState)(w),S=void 0!==D("core/editor")?D("core/editor").getEditorSettings().colors:[],A=S.concat();A[S.length]={name:"デフォルト",color:y};let L=gutenberg_rinker.templates,O={};for(let e in L)O[e]=L[e].template_name;const[I,B]=(0,a.useState)("");let F=gutenberg_rinker.load_template_id;const[z,G]=(0,a.useState)(F);function j(e){l({content:e}),l({content_text:e});let t=new RegExp('post_id="(\\S+)"'),n=e.match(t);n&&n[1]&&l({post_id:n[1]})}return(0,a.createElement)(M,null,(0,a.createElement)("div",(0,r.useBlockProps)(),(0,a.createElement)("input",{tagName:"p",className:"rinkerg-richtext",onChange:e=>j(e.target.value),onFocus:e=>j(e.target.value),formattingControls:[],value:i}),(0,a.createElement)("button",{className:"button thickbox add_media",onClick:e=>{tb_show("商品リンク追加","media-upload.php?type=yyi_rinker&tab=yyi_rinker_search_amazon&cid="+t+"&TB_iframe=true")}},"商品リンク追加"),(0,a.createElement)(m,{setAttributes:l,attributes:n})),(0,a.createElement)(P,{attributes:n,setAttributes:l,useState:a.useState,templateName:I,template_names:O,setTemplateName:B,loadTemplateId:z,setLoadTemplateId:G,colors:A,color:N,setColor:x,content_text:c}))},save:function(e){let{attributes:t,setAttributes:n,className:l}=e;return(0,a.createElement)("p",{className:t.className},t.content)},transforms:{from:[{type:"shortcode",tag:"itemlink",attributes:{content:{type:"array",shortcode:(e,t)=>[t.content||""]}}}]}})}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=function(t,n,l,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],r=e[c][2];for(var s=!0,i=0;i<n.length;i++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var m=l();void 0!==m&&(t=m)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,l,r]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,r,o=n[0],s=n[1],i=n[2],m=0;if(o.some((function(t){return 0!==e[t]}))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(i)var c=i(a)}for(t&&t(n);m<o.length;m++)r=o[m],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self.webpackChunkblock=self.webpackChunkblock||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var l=a.O(void 0,[431],(function(){return a(558)}));l=a.O(l)}();